package it.helloabitante.service.abitante;

import java.sql.Connection;
import java.util.ArrayList;
import java.util.List;

import it.helloabitante.dao.MyConnection;
import it.helloabitante.dao.abitante.AbitanteDAO;
import it.helloabitante.model.Abitante;

public class AbitanteServiceImpl implements AbitanteService {
	
	private AbitanteDAO abitanteDAO;
	
	public void setAbitanteDAO(AbitanteDAO abitanteDAO) {
		this.abitanteDAO = abitanteDAO;
	}

	@Override
	public List<Abitante> cercaPerNomeECognome(String nome, String cognome)  {
		List<Abitante> result = new ArrayList<>();
		try(Connection connection = MyConnection.getConnection()) {

			// inietto la connection nel dao
			abitanteDAO.setConnection(connection);

			// eseguo quello che realmente devo fare
			result = abitanteDAO.list();

		} catch (Exception e) {
			e.printStackTrace();
			throw e;
		} 
		return result;
	}
}
	@Override
	public List<Abitante> list() throws Exception {
		List<Abitante> result = new ArrayList<>();
		try(Connection connection = MyConnection.getConnection()) {

			// inietto la connection nel dao
			abitanteDAO.setConnection(connection);

			// eseguo quello che realmente devo fare
			result = abitanteDAO.list();

		} catch (Exception e) {
			e.printStackTrace();
			throw e;
		} 
		return result;
	}
	}


